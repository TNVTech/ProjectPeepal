<%
// This is a server-side rendered partial that will be replaced with the company name
// The company_id is passed as a parameter
const db = require('../../config/db');

// Use an IIFE (Immediately Invoked Function Expression) to handle the async operation
(async () => {
    try {
        // Query the company table to get the company name
        const [rows] = await db.pool.query(
            'SELECT c_name FROM company WHERE company_id = ?',
            [company_id]
        );
        
        // If a company is found, output its name
        if (rows.length > 0) {
            return rows[0].c_name;
        } else {
            return 'AdminLTE 3';
        }
    } catch (error) {
        console.error('Error fetching company name:', error);
        return 'AdminLTE 3';
    }
})();
%> 